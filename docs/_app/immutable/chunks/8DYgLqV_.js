import{p as X,c as x,a as E,f as z}from"./DnKRhqIz.js";import{z as W,k as F,q as J,p as T,f as w,a as k,c as K,b as V,r as Q,t as U}from"./C_6UiiDj.js";import{s as M}from"./5BVLSNDe.js";import{p as h,i as Y,r as I,a as q}from"./BiKsXKFa.js";import{I as Z}from"./HTnx3aD8.js";import{c as B}from"./Dx7iaVqR.js";import{a as $,b as ee,c as O,d as te,f as ne}from"./BXc22fYE.js";import{g as se,h as oe,c as re,b as G,m as ae}from"./CAmQO5x0.js";const ie=oe({component:"progress",parts:["root"]});class D{static create(e){return new D(e)}opts;attachment;constructor(e){this.opts=e,this.attachment=se(this.opts.ref)}#e=W(()=>({role:"progressbar",value:this.opts.value.current,"aria-valuemin":this.opts.min.current,"aria-valuemax":this.opts.max.current,"aria-valuenow":this.opts.value.current===null?void 0:this.opts.value.current,"data-value":this.opts.value.current===null?void 0:this.opts.value.current,"data-state":le(this.opts.value.current,this.opts.max.current),"data-max":this.opts.max.current,"data-min":this.opts.min.current,"data-indeterminate":this.opts.value.current===null?"":void 0,[ie.root]:"",...this.attachment}));get props(){return F(this.#e)}set props(e){J(this.#e,e)}}function le(n,e){return n===null?"indeterminate":n===e?"loaded":"loading"}var ce=z("<div><!></div>");function de(n,e){const t=X();T(e,!0);let s=h(e,"value",3,0),o=h(e,"max",3,100),r=h(e,"min",3,0),a=h(e,"id",19,()=>re(t)),i=h(e,"ref",15,null),l=I(e,["$$slots","$$events","$$legacy","child","children","value","max","min","id","ref"]);const d=D.create({value:G(()=>s()),max:G(()=>o()),min:G(()=>r()),id:G(()=>a()),ref:G(()=>i(),u=>i(u))}),c=W(()=>ae(l,d.props));var m=x(),P=w(m);{var v=u=>{var g=x(),_=w(g);M(_,()=>e.child,()=>({props:F(c)})),E(u,g)},b=u=>{var g=ce();$(g,()=>({...F(c)}));var _=K(g);M(_,()=>e.children??V),Q(g),E(u,g)};Y(P,u=>{e.child?u(v):u(b,!1)})}E(n,m),k()}function N(n,e){let t=n/e*100;return isNaN(t)&&(t=0),t}function A(n,e){let t=0;if(Object.entries(n).length===0)return 0;let s=0;return Object.entries(n).forEach(([o,r])=>{const a=e.find(i=>i.name===o);a&&(t+=r.pointsEarned/r.pointsPossible*a.weightPercentage,s+=a.weightPercentage)}),t=t/s*100,isNaN(t)?(console.error("Grade percentage is NaN"),0):t}function ye(n){const{pointsEarned:e,pointsPossible:t}=S(n);return N(e,t)}function ue(n,e,t){const{pointsEarned:s,pointsPossible:o,extraCredit:r}=n,a=N(e,t);e+=s,t+=r?0:o;const l=N(e,t)-a;return{assignment:{...n,gradePercentageChange:l},totalPointsEarned:e,totalPointsPossible:t}}function pe(n,e,t){const{pointsEarned:s,pointsPossible:o,category:r,extraCredit:a}=n,i=A(e,t),l=e[r]??{pointsEarned:0,pointsPossible:0};e[r]={pointsEarned:l.pointsEarned+s,pointsPossible:l.pointsPossible+(a?0:o)};const c=A(e,t)-i;return{assignment:{...n,gradePercentageChange:c},pointsByCategory:e}}function ge(n,e){let t={};return n.toReversed().map(o=>{const{pointsEarned:r,pointsPossible:a,notForGrade:i,category:l}=o;if(r===void 0||a===void 0||i||l===void 0)return o;const d={...o,pointsEarned:r,pointsPossible:a,notForGrade:i,category:l},c=pe(d,t,e);return t=c.pointsByCategory,c.assignment}).toReversed()}function fe(n){let e=0,t=0;return n.toReversed().map(o=>{const{pointsEarned:r,pointsPossible:a,notForGrade:i,category:l}=o;if(r===void 0||a===void 0||i||l===void 0)return o;const d={...o,pointsEarned:r,pointsPossible:a,notForGrade:i,category:l},c=ue(d,e,t);return e=c.totalPointsEarned,t=c.totalPointsPossible,c.assignment}).toReversed()}function Me(n,e){return e===void 0?fe(n):ge(n,e)}function Ne(n,e){return n.filter(t=>{const s=e[t.name];return s===void 0?!1:t.pointsEarned!==s.pointsEarned||t.pointsPossible!==s.pointsPossible}).map(t=>{const s=e[t.name];if(s===void 0)return null;const{pointsEarned:o,pointsPossible:r}=s,a=t.pointsEarned-o,i=t.pointsPossible-r,l=A(e,n);e[t.name]={pointsEarned:o+a,pointsPossible:r+i};const c=A(e,n)-l;return Math.abs(c)<1e-4?null:{name:`Hidden ${t.name} Assignments`,id:me(),pointsEarned:a,pointsPossible:i,unscaledPoints:void 0,extraCredit:!1,gradePercentageChange:c,notForGrade:!1,hidden:!0,category:t.name,date:new Date,newHypothetical:!1}}).filter(t=>t!==null)}const me=()=>Math.random().toString(36).substring(2,15);function Se(n){const e={};return n.forEach(t=>{const{category:s,pointsEarned:o,pointsPossible:r,extraCredit:a}=t,i=e[s]??{pointsEarned:0,pointsPossible:0};e[s]={pointsEarned:i.pointsEarned+o,pointsPossible:i.pointsPossible+(a?0:r)}}),e}function Pe(n){const e=new Map;return n.forEach(t=>{const{category:s,pointsEarned:o,pointsPossible:r,extraCredit:a}=t,i=e.get(s)??{pointsEarned:0,pointsPossible:0};e.set(s,{pointsEarned:i.pointsEarned+o,pointsPossible:i.pointsPossible+(a?0:r)})}),e}function R(n){const e=n.toString(),t=e.indexOf(".");return t===-1?0:e.length-t-1}function H(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}function j(n,e){const t=Math.pow(10,e);return Math.floor(n*t)/t}function We(n,e){const t=Math.min(R(n),R(e)),s=H(n,t)===H(e,t),o=j(n,t)===j(e,t);return s||o}function S(n){let e=0,t=0;return n.forEach(s=>{const{pointsEarned:o,pointsPossible:r,extraCredit:a}=s;e+=o,a||(t+=r)}),{pointsEarned:e,pointsPossible:t}}function Te(n){if(n?.Marks==="")return;const e=n?.Marks.Mark.GradeCalculationSummary;return typeof e=="string"||!e?.AssignmentGradeCalc?void 0:e.AssignmentGradeCalc.map(s=>({name:s._Type,weightPercentage:parseFloat(s._Weight),pointsEarned:parseFloat(s._Points),pointsPossible:parseFloat(s._PointsPossible),weightedPercentage:parseFloat(s._WeightedPct),gradeLetter:s._CalculatedMark}))}function ke(n){return n.map(e=>{const{pointsEarned:t,pointsPossible:s,notForGrade:o}=e;return t===void 0||s===void 0||o?null:{...e,pointsEarned:t,pointsPossible:s,notForGrade:o}}).filter(e=>e!==null)}function Ie(n){return n.map(e=>{const{pointsEarned:t,pointsPossible:s,notForGrade:o,category:r}=e;return t===void 0||s===void 0||o||r===void 0?null:{...e,pointsEarned:t,pointsPossible:s,notForGrade:o,category:r}}).filter(e=>e!==null)}function De(n){const{_Date:e,_Measure:t,_Notes:s,_Point:o,_PointPossible:r,_Points:a,_ScoreCalValue:i,_ScoreMaxValue:l,_Type:d}=n,c=o!==void 0?o===""?0:parseFloat(o):void 0,m=r!==void 0&&r!==""?parseFloat(r):l!==void 0?parseFloat(l):a==="Points Possible"||typeof a!="string"?void 0:parseFloat(a?.split(" Points Possible")[0]??""),P=o!==void 0&&o!==""&&i!==void 0&&o!==i,v=r!==void 0&&r!==""&&l!==void 0&&r!==l;let b;(P||v)&&i!==void 0&&l!==void 0&&(b={pointsEarned:parseFloat(i),pointsPossible:parseFloat(l)});const u=s.replace("(Not For Grading)","");return{name:t,id:n._GradebookID,pointsEarned:c,pointsPossible:m,unscaledPoints:b,extraCredit:r==="",gradePercentageChange:void 0,notForGrade:s.includes("(Not For Grading)"),hidden:!1,category:d,date:new Date(e),comments:u.length>0?u:void 0,newHypothetical:!1}}function Oe({targetGradePercentage:n,assignmentPointsPossible:e,...t}){const s=n/100;if(t.hasCategories){const{otherAssignments:o,gradeCategoryWeightProportions:r,assignmentCategoryName:a}=t,i=r.get(a);if(!i)return console.error(`Cannot calculate points needed for target grade: gradeCategories does not contain ${a}`),NaN;const l=Pe(o),d=new Map;if(r.forEach((p,f)=>{const C=l.get(f)??{pointsEarned:0,pointsPossible:0};d.set(f,{weightProportion:p,otherPointsEarned:C.pointsEarned,otherPointsPossible:C.pointsPossible})}),d.size===0)return console.error("Cannot calculate points needed for target grade: no categories found"),NaN;const c=new Map(d.entries().filter(([p,{otherPointsPossible:f}])=>p!==a&&f!==0).map(([p,{otherPointsEarned:f,otherPointsPossible:C,...y}])=>[p,{pointsEarned:f,pointsPossible:C,...y}])),m=c.values().reduce((p,{weightProportion:f})=>p+f,0)+i,P=c.values().reduce((p,{weightProportion:f,pointsEarned:C,pointsPossible:y})=>{const L=C/y*f;return p+L},0),b=(s*m-P)/i,{pointsEarned:u,pointsPossible:g}=S(o.filter(p=>p.category===a)),_=g+e;return b*_-u}else{const{otherAssignments:o}=t,{pointsEarned:r,pointsPossible:a}=S(o),i=e+a;return s*i-r}}function Re(n,e){T(e,!0);let t=I(e,["$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];Z(n,q({name:"circle-x"},()=>t,{get iconNode(){return s},children:(o,r)=>{var a=x(),i=w(a);M(i,()=>e.children??V),E(o,a)},$$slots:{default:!0}})),k()}var he=z('<div data-slot="progress-indicator"></div>');function He(n,e){T(e,!0);let t=h(e,"ref",15,null),s=h(e,"max",3,100),o=I(e,["$$slots","$$events","$$legacy","ref","class","indicatorClass","max","value"]);var r=x(),a=w(r);{let i=W(()=>O("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e.class));B(a,()=>de,(l,d)=>{d(l,q({"data-slot":"progress",get class(){return F(i)},get value(){return e.value},get max(){return s()}},()=>o,{get ref(){return t()},set ref(c){t(c)},children:(c,m)=>{var P=he();U(v=>{te(P,1,v),ne(P,`transform: translateX(-${100-100*(e.value??0)/(s()??1)}%)`)},[()=>ee(O("bg-primary h-full w-full flex-1 transition-all",e.indicatorClass))]),E(c,P)},$$slots:{default:!0}}))})}E(n,r),k()}export{Re as C,He as P,A as a,Se as b,N as c,ke as d,ye as e,Oe as f,Ie as g,Ne as h,Me as i,Te as j,We as k,Pe as l,fe as m,ge as n,De as p,me as r};
