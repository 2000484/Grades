import{i as a,a4 as o,v as h,q as n,k as c}from"./C_6UiiDj.js";import{w as u}from"./BQNGcfxm.js";function f(i){a(()=>()=>{i()})}function l(i){o().then(i)}class m{#t;#i=null;constructor(t){this.#t=t,f(()=>this.#n())}#n(){this.#i&&(window.cancelAnimationFrame(this.#i),this.#i=null)}run(t){this.#n();const e=this.#t.ref.current;if(e){if(typeof e.getAnimations!="function"){this.#e(t);return}this.#i=window.requestAnimationFrame(()=>{const s=e.getAnimations();if(s.length===0){this.#e(t);return}Promise.allSettled(s.map(r=>r.finished)).then(()=>{this.#e(t)})})}}#e(t){const e=()=>{t()};this.#t.afterTick?l(e):e()}}class w{#t;#i;#n;#e=h(!1);constructor(t){this.#t=t,n(this.#e,t.open.current,!0),this.#i=t.enabled??!0,this.#n=new m({ref:this.#t.ref,afterTick:this.#t.open}),u(()=>this.#t.open.current,e=>{e&&n(this.#e,!0),this.#i&&this.#n.run(()=>{e===this.#t.open.current&&(this.#t.open.current||n(this.#e,!1),this.#t.onComplete?.())})})}get shouldRender(){return c(this.#e)}}export{w as P,l as a,f as o};
