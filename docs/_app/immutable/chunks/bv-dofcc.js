import{A as l,a as f,b as h,c as d,E as S,i as A,H as R}from"./BQNGcfxm.js";import{v,e as T,q as K,k as C}from"./C_6UiiDj.js";import{i as W,B as I,a as z,b as B,d as F,t as O,e as E,f as D}from"./CAmQO5x0.js";function n(e){let t=v(T(e));return{[I]:!0,[W]:!0,get current(){return C(t)},set current(r){K(t,r,!0)}}}n.from=z;n.with=B;n.flatten=F;n.readonly=O;n.isBox=E;n.isWritableBox=D;function q(e){return window.getComputedStyle(e).getPropertyValue("direction")}function w(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?h:f,vertical:d}[t]}function H(e="ltr",t="horizontal"){return{horizontal:e==="rtl"?f:h,vertical:l}[t]}function P(e="ltr",t="horizontal"){return["ltr","rtl"].includes(e)||(e="ltr"),["horizontal","vertical"].includes(t)||(t="horizontal"),{nextKey:w(e,t),prevKey:H(e,t)}}class L{#t;#e=n(null);constructor(t){this.#t=t}getCandidateNodes(){return this.#t.rootNode.current?this.#t.candidateSelector?Array.from(this.#t.rootNode.current.querySelectorAll(this.#t.candidateSelector)):this.#t.candidateAttr?Array.from(this.#t.rootNode.current.querySelectorAll(`[${this.#t.candidateAttr}]:not([data-disabled])`)):[]:[]}focusFirstCandidate(){const t=this.getCandidateNodes();t.length&&t[0]?.focus()}handleKeydown(t,r,c=!1){const y=this.#t.rootNode.current;if(!y||!t)return;const o=this.getCandidateNodes();if(!o.length)return;const a=o.indexOf(t),p=q(y),{nextKey:x,prevKey:m}=P(p,this.#t.orientation.current),g=this.#t.loop.current,u={[x]:a+1,[m]:a-1,[R]:0,[S]:o.length-1};if(c){const b=x===d?f:d,N=m===l?h:l;u[b]=a+1,u[N]=a-1}let i=u[r.key];if(i===void 0)return;r.preventDefault(),i<0&&g?i=o.length-1:i===o.length&&g&&(i=0);const s=o[i];if(s)return s.focus(),this.#e.current=s.id,this.#t.onCandidateFocus?.(s),s}getTabIndex(t){const r=this.getCandidateNodes(),c=this.#e.current!==null;return t&&!c&&r[0]===t?(this.#e.current=t.id,0):t?.id===this.#e.current?0:-1}setCurrentTabStopId(t){this.#e.current=t}focusCurrentTabStop(){const t=this.#e.current;if(!t)return;const r=this.#t.rootNode.current?.querySelector(`#${t}`);!r||!A(r)||r.focus()}}export{L as R};
