import{f as i,a as r,t as T,c as re}from"../chunks/DnKRhqIz.js";import"../chunks/DiF9-A_S.js";import{e as ae,p as oe,f as p,a as se,d as ne,$ as de,s as $,n as A,c as K,r as S,k as o,t as x,ab as le}from"../chunks/C_6UiiDj.js";import{i as m,s as P}from"../chunks/BiKsXKFa.js";import{a as U}from"../chunks/HTnx3aD8.js";import{h as ie}from"../chunks/D4UKCDl_.js";import{i as ce}from"../chunks/CUiJWTCC.js";import{a as fe,c as me,L as ue,f as _e,r as ve}from"../chunks/B2N5e1u8.js";import{b as pe}from"../chunks/B5lnDM8m.js";import{L as $e}from"../chunks/BTwEwlez.js";import{R as he}from"../chunks/hruS_XFh.js";import{A as ge,a as Ae,b as xe,c as Pe}from"../chunks/DR_AJ1NY.js";import{A as ye}from"../chunks/BrFtJG7U.js";import{B as be}from"../chunks/B_MuCRaO.js";import{C as Re}from"../chunks/BXWZ-FWu.js";const n=ae({loaded:!1}),W=async(y=!1)=>{const{studentAccount:h}=fe;h&&await me(n,()=>h.attendance(),ue.attendance,1e3*60*60,y)};var ke=i(" <!> <!>",1),we=i("<li> </li>"),Ce=i('<ol class="text-muted-foreground space-y-2"></ol>'),De=i("<!> <!>",1),Le=i("<!> Looks like you haven't had any attendence events yet.",1),Ne=i('<div class="mx-2 mt-8 md:mx-4"><!></div>'),Te=i("<!> <!> <!>",1);function Ve(y,h){oe(h,!1),W();const j=/Field Trip|School Pass|Excused|Medical\/Dent|Comp Ed\/Court-Religi|Illness or Sickness|SB14 Wellness\/Illnes|Med. all day\/period/;function b(e){const a=e.map(t=>t._Name);return a.some(t=>t==="Absent"||t==="Non ADA")?"Absent":a.some(t=>/Tardy/.test(t))?"Tardy":a.some(t=>j.test(t))?"Excused":a.some(t=>t==="Present")?"Present":"Unknown"}function z(e){switch(e){case"Absent":return"red";case"Tardy":return"yellow";case"Excused":case"Present":return"green";default:return"orange"}}ce();var B=Te();ie("12o6947",e=>{ne(()=>{de.title=`Attendance - ${pe}`})});var E=p(B);{var G=e=>{$e(e,{children:(a,t)=>{A();var R=T("Loading attendance...");r(a,R)},$$slots:{default:!0}})};m(E,e=>{n.loaded||e(G)})}var I=$(E,2);{var H=e=>{he(e,{get canRefresh(){return n.loaded},get lastRefresh(){return n.lastRefresh},refresh:()=>W(!0)})};m(I,e=>{n.lastRefresh!==void 0&&e(H)})}var J=$(I,2);{var O=e=>{var a=Ne(),t=K(a);{var R=c=>{ge(c,{type:"single",class:"mx-auto max-w-2xl",children:(k,V)=>{var u=re(),w=p(u);U(w,1,()=>n.data.Absences.Absence,C=>C._AbsenceDate,(C,l)=>{Ae(C,{children:(X,Se)=>{var F=De(),M=p(F);xe(M,{children:(D,Z)=>{A();var f=ke(),d=p(f,!0),_=$(d);{var v=s=>{var g=T();x(()=>P(g,`: ${o(l)._Note??""}`)),r(s,g)};m(_,s=>{o(l)._Note&&s(v)})}var L=$(_,2);{var N=s=>{{let g=le(()=>z(b(o(l).Periods.Period??[])??"unknown"));be(s,{get color(){return o(g)},class:"ml-auto",children:(ee,Be)=>{A();var q=T();x(te=>P(q,te),[()=>b(o(l).Periods.Period??[])]),r(ee,q)},$$slots:{default:!0}})}};m(L,s=>{b(o(l).Periods.Period??[])&&s(N)})}x(s=>P(d,s),[()=>_e.format(new Date(o(l)._AbsenceDate))]),r(D,f)},$$slots:{default:!0}});var Y=$(M,2);Pe(Y,{children:(D,Z)=>{var f=Ce();U(f,5,()=>o(l).Periods.Period?.filter(d=>d._Name)??[],d=>d._Course,(d,_)=>{var v=we(),L=K(v);S(v),x(N=>P(L,`${N??""}: ${o(_)._Name??""}`),[()=>ve(o(_)._Course)]),r(d,v)}),S(f),r(D,f)},$$slots:{default:!0}}),r(X,F)},$$slots:{default:!0}})}),r(k,u)},$$slots:{default:!0}})},Q=c=>{ye(c,{class:"mx-auto w-fit",children:(k,V)=>{var u=Le(),w=p(u);Re(w,{}),A(),r(k,u)},$$slots:{default:!0}})};m(t,c=>{n.data.Absences.Absence?.length>0?c(R):c(Q,!1)})}S(a),r(e,a)};m(J,e=>{n.data&&n.data.Absences.Absence&&e(O)})}r(y,B),se()}export{Ve as component};
